(function(a){var b=new Array,c=function(){},d=0;var e={splashVPos:"25%",loaderVPos:"75%",splashID:"#jpreContent",showSplash:true,showPercentage:true,debugMode:false,splashFunction:function(){}};var f=function(c){a(c).find("*:not(script)").each(function(){var c="";if(a(this).css("background-image").indexOf("none")==-1){c=a(this).css("background-image");if(c.indexOf("url")!=-1){var d=c.match(/url\((.*?)\)/);c=d[1].replace(/\"/g,"")}}else if(a(this).get(0).nodeName.toLowerCase()=="img"&&typeof a(this).attr("src")!="undefined"){c=a(this).attr("src")}if(c.length>0){b.push(c)}})};var g=function(){for(var a=0;a<b.length;a++){h(b[a])}};var h=function(b){var c=new Image;a(c).load(function(){i()}).error(function(){i()}).attr("src",b)};var i=function(){d++;var c=Math.round(d/b.length*100);a(jBar).stop().animate({width:c+"%"},500,"linear");if(e.showPercentage){a(jPer).text(c+"%")}if(d>=b.length){d=b.length;if(e.debugMode){var f=debug()}j()}};var j=function(){a(jBar).stop().animate({width:"100%"},500,"linear",function(){a(jOverlay).fadeOut(800,function(){a(jOverlay).remove();c()})})};var k=function(b){jOverlay=a("<div></div>").attr("id","jpreOverlay").css({position:"fixed",top:0,left:0,width:"800px",height:"600px",zIndex:9999999}).appendTo("body");if(e.showSplash){jContent=a("<div></div>").attr("id","jpreSlide").appendTo(jOverlay);var c=a(window).width()-a(jContent).width();a(jContent).css({position:"absolute",top:e.splashVPos,left:Math.round(50/a(window).width()*c)-12+"%"});a(jContent).html(a(e.splashID).wrap("<div/>").parent().html());a(e.splashID).remove();e.splashFunction()}jLoader=a("<div></div>").attr("id","jpreLoader").appendTo(jOverlay);var d=a(window).width()-a(jLoader).width();a(jLoader).css({position:"absolute",top:e.loaderVPos,left:Math.round(50/a(window).width()*d)-12+"%"});jBar=a("<div></div>").attr("id","jpreBar").css({width:"0%",height:"100%"}).appendTo(jLoader);if(e.showPercentage){jPer=a("<div></div>").attr("id","jprePercentage").css({position:"relative",height:"100%"}).appendTo(jLoader).html("Loading...")}};a.fn.jpreLoader=function(b,d){if(b){a.extend(e,b)}if(typeof d=="function"){c=d}k(this);f(this);g();return this}})(jQuery)